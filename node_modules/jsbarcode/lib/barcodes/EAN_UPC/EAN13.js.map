{"version":3,"sources":["../../../src/barcodes/EAN_UPC/EAN13.js"],"names":["checksum","number","res","substr","split","map","n","reduce","sum","a","idx","EAN13","data","options","search","lastChar","structure","EAN13_STRUCTURE","displayValue","unshift","text","textAlign","fontSize","push","EAN"],"mappings":";;;;;;;AAGA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,CAAAC,MAAM,EAAI;AAC1B,MAAMC,GAAG,GAAGD,MAAM,CAChBE,MADU,CACH,CADG,EACA,EADA,EAEVC,KAFU,CAEJ,EAFI,EAGVC,GAHU,CAGN,UAAAC,CAAC;AAAA,WAAI,CAACA,CAAL;AAAA,GAHK,EAIVC,MAJU,CAIH,UAACC,GAAD,EAAMC,CAAN,EAASC,GAAT;AAAA,WAAkBA,GAAG,GAAG,CAAN,GAAUF,GAAG,GAAGC,CAAC,GAAG,CAApB,GAAwBD,GAAG,GAAGC,CAAhD;AAAA,GAJG,EAIiD,CAJjD,CAAZ;AAMA,SAAO,CAAC,KAAMP,GAAG,GAAG,EAAb,IAAoB,EAA3B;AACA,CARD;;IAUMS,K;;;;;AACL,iBAAYC,IAAZ,EAAkBC,OAAlB,EAA2B;AAAA;;AAAA;;AAC1B;AACA,QAAID,IAAI,CAACE,MAAL,CAAY,aAAZ,MAA+B,CAAC,CAApC,EAAuC;AACtCF,MAAAA,IAAI,IAAIZ,QAAQ,CAACY,IAAD,CAAhB;AACA;;AAED,+EAAMA,IAAN,EAAYC,OAAZ,GAN0B,CAQ1B;;AACA,UAAKE,QAAL,GAAgBF,OAAO,CAACE,QAAxB;AAT0B;AAU1B;;;;4BAEO;AACP,aAAO,KAAKH,IAAL,CAAUE,MAAV,CAAiB,aAAjB,MAAoC,CAAC,CAArC,IAA0C,CAAC,KAAKF,IAAL,CAAU,EAAV,CAAD,KAAmBZ,QAAQ,CAAC,KAAKY,IAAN,CAA5E;AACA;;;+BAEU;AACV,iFAAsB,CAAtB,EAAyB,CAAzB;AACA;;;iCAEY;AACZ,UAAMA,IAAI,GAAG,KAAKA,IAAL,CAAUT,MAAV,CAAiB,CAAjB,EAAoB,CAApB,CAAb;AACA,UAAMa,SAAS,GAAGC,2BAAgB,KAAKL,IAAL,CAAU,CAAV,CAAhB,CAAlB;AACA,mFAAwBA,IAAxB,EAA8BI,SAA9B;AACA;;;gCAEW;AACX,kFAAuB,CAAvB,EAA0B,CAA1B;AACA;;;kCAEa;AACb,UAAMJ,IAAI,GAAG,KAAKA,IAAL,CAAUT,MAAV,CAAiB,CAAjB,EAAoB,CAApB,CAAb;AACA,oFAAyBS,IAAzB,EAA+B,QAA/B;AACA,K,CAED;;;;oCACgB;AACf,UAAMA,IAAI,2EAAV,CADe,CAGf;;;AACA,UAAI,KAAKC,OAAL,CAAaK,YAAjB,EAA+B;AAC9BN,QAAAA,IAAI,CAACO,OAAL,CAAa;AACZP,UAAAA,IAAI,EAAE,cADM;AAEZQ,UAAAA,IAAI,EAAE,KAAKA,IAAL,CAAUjB,MAAV,CAAiB,CAAjB,EAAoB,CAApB,CAFM;AAGZU,UAAAA,OAAO,EAAE;AAAEQ,YAAAA,SAAS,EAAE,MAAb;AAAqBC,YAAAA,QAAQ,EAAE,KAAKA;AAApC;AAHG,SAAb;;AAMA,YAAI,KAAKT,OAAL,CAAaE,QAAjB,EAA2B;AAC1BH,UAAAA,IAAI,CAACW,IAAL,CAAU;AACTX,YAAAA,IAAI,EAAE;AADG,WAAV;AAGAA,UAAAA,IAAI,CAACW,IAAL,CAAU;AACTX,YAAAA,IAAI,EAAE,OADG;AAETQ,YAAAA,IAAI,EAAE,KAAKP,OAAL,CAAaE,QAFV;AAGTF,YAAAA,OAAO,EAAE;AAAES,cAAAA,QAAQ,EAAE,KAAKA;AAAjB;AAHA,WAAV;AAKA;AACD;;AAED,aAAOV,IAAP;AACA;;;;EA7DkBY,a;;eAgELb,K","sourcesContent":["// Encoding documentation:\n// https://en.wikipedia.org/wiki/International_Article_Number_(EAN)#Binary_encoding_of_data_digits_into_EAN-13_barcode\n\nimport { EAN13_STRUCTURE } from './constants';\nimport EAN from './EAN';\n\n// Calculate the checksum digit\n// https://en.wikipedia.org/wiki/International_Article_Number_(EAN)#Calculation_of_checksum_digit\nconst checksum = number => {\n\tconst res = number\n\t\t.substr(0, 12)\n\t\t.split('')\n\t\t.map(n => +n)\n\t\t.reduce((sum, a, idx) => (idx % 2 ? sum + a * 3 : sum + a), 0);\n\n\treturn (10 - (res % 10)) % 10;\n};\n\nclass EAN13 extends EAN {\n\tconstructor(data, options) {\n\t\t// Add checksum if it does not exist\n\t\tif (data.search(/^[0-9]{12}$/) !== -1) {\n\t\t\tdata += checksum(data);\n\t\t}\n\n\t\tsuper(data, options);\n\n\t\t// Adds a last character to the end of the barcode\n\t\tthis.lastChar = options.lastChar;\n\t}\n\n\tvalid() {\n\t\treturn this.data.search(/^[0-9]{13}$/) !== -1 && +this.data[12] === checksum(this.data);\n\t}\n\n\tleftText() {\n\t\treturn super.leftText(1, 6);\n\t}\n\n\tleftEncode() {\n\t\tconst data = this.data.substr(1, 6);\n\t\tconst structure = EAN13_STRUCTURE[this.data[0]];\n\t\treturn super.leftEncode(data, structure);\n\t}\n\n\trightText() {\n\t\treturn super.rightText(7, 6);\n\t}\n\n\trightEncode() {\n\t\tconst data = this.data.substr(7, 6);\n\t\treturn super.rightEncode(data, 'RRRRRR');\n\t}\n\n\t// The \"standard\" way of printing EAN13 barcodes with guard bars\n\tencodeGuarded() {\n\t\tconst data = super.encodeGuarded();\n\n\t\t// Extend data with left digit & last character\n\t\tif (this.options.displayValue) {\n\t\t\tdata.unshift({\n\t\t\t\tdata: '000000000000',\n\t\t\t\ttext: this.text.substr(0, 1),\n\t\t\t\toptions: { textAlign: 'left', fontSize: this.fontSize }\n\t\t\t});\n\n\t\t\tif (this.options.lastChar) {\n\t\t\t\tdata.push({\n\t\t\t\t\tdata: '00'\n\t\t\t\t});\n\t\t\t\tdata.push({\n\t\t\t\t\tdata: '00000',\n\t\t\t\t\ttext: this.options.lastChar,\n\t\t\t\t\toptions: { fontSize: this.fontSize }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nexport default EAN13;\n"],"file":"EAN13.js"}